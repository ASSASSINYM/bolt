<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Desugaring__Desugared_ast (desugaring.Desugaring__Desugared_ast)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">desugaring</a> &#x00BB; Desugaring__Desugared_ast</nav><h1>Module <code>Desugaring__Desugared_ast</code></h1><p>The desugared AST consists of the typed AST but simplified.</p><ul><li>for loops have been desugared into while loops.</li><li>Shadowing is not permitted, so variables have been given unique monikers</li><li>Block expressions have just been replaced by an expr list, since no shadowing so block scope not necessary</li></ul></header><dl><dt class="spec type" id="type-identifier"><a href="#type-identifier" class="anchor"></a><code><span class="keyword">type</span> identifier</code><code> = </code><table class="variant"><tr id="type-identifier.Variable" class="anchored"><td class="def constructor"><a href="#type-identifier.Variable" class="anchor"></a><code>| </code><code><span class="constructor">Variable</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <a href="../../ast/Ast/Ast_types/Var_name/index.html#type-t">Ast.Ast_types.Var_name.t</a></code></td></tr><tr id="type-identifier.ObjField" class="anchored"><td class="def constructor"><a href="#type-identifier.ObjField" class="anchor"></a><code>| </code><code><span class="constructor">ObjField</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <a href="../../ast/Ast/Ast_types/Var_name/index.html#type-t">Ast.Ast_types.Var_name.t</a> * <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <a href="../../ast/Ast/Ast_types/Field_name/index.html#type-t">Ast.Ast_types.Field_name.t</a></code></td><td class="doc"><p>first type is of the object, second is of field</p></td></tr></table></dt><dt class="spec type" id="type-expr"><a href="#type-expr" class="anchor"></a><code><span class="keyword">type</span> expr</code><code> = </code><table class="variant"><tr id="type-expr.Integer" class="anchored"><td class="def constructor"><a href="#type-expr.Integer" class="anchor"></a><code>| </code><code><span class="constructor">Integer</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * int</code></td><td class="doc"><p>no need for type_expr annotation as obviously TEInt</p></td></tr><tr id="type-expr.Boolean" class="anchored"><td class="def constructor"><a href="#type-expr.Boolean" class="anchor"></a><code>| </code><code><span class="constructor">Boolean</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * bool</code></td><td class="doc"><p>no need for type_expr annotation as obviously TEBool</p></td></tr><tr id="type-expr.Identifier" class="anchored"><td class="def constructor"><a href="#type-expr.Identifier" class="anchor"></a><code>| </code><code><span class="constructor">Identifier</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * <a href="index.html#type-identifier">identifier</a></code></td><td class="doc"><p>Type information associated with identifier</p></td></tr><tr id="type-expr.Constructor" class="anchored"><td class="def constructor"><a href="#type-expr.Constructor" class="anchor"></a><code>| </code><code><span class="constructor">Constructor</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <a href="../../ast/Ast/Ast_types/Class_name/index.html#type-t">Ast.Ast_types.Class_name.t</a> * <span><a href="index.html#type-constructor_arg">constructor_arg</a> list</span></code></td></tr><tr id="type-expr.Let" class="anchored"><td class="def constructor"><a href="#type-expr.Let" class="anchor"></a><code>| </code><code><span class="constructor">Let</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <a href="../../ast/Ast/Ast_types/Var_name/index.html#type-t">Ast.Ast_types.Var_name.t</a> * <a href="index.html#type-expr">expr</a></code></td></tr><tr id="type-expr.Assign" class="anchored"><td class="def constructor"><a href="#type-expr.Assign" class="anchor"></a><code>| </code><code><span class="constructor">Assign</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <a href="index.html#type-identifier">identifier</a> * <a href="index.html#type-expr">expr</a></code></td></tr><tr id="type-expr.Consume" class="anchored"><td class="def constructor"><a href="#type-expr.Consume" class="anchor"></a><code>| </code><code><span class="constructor">Consume</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * <a href="index.html#type-identifier">identifier</a></code></td><td class="doc"><p>Type is associated with the identifier</p></td></tr><tr id="type-expr.MethodApp" class="anchored"><td class="def constructor"><a href="#type-expr.MethodApp" class="anchor"></a><code>| </code><code><span class="constructor">MethodApp</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <a href="../../ast/Ast/Ast_types/Var_name/index.html#type-t">Ast.Ast_types.Var_name.t</a> * <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <a href="../../ast/Ast/Ast_types/Method_name/index.html#type-t">Ast.Ast_types.Method_name.t</a> * <span><a href="index.html#type-expr">expr</a> list</span></code></td></tr><tr id="type-expr.FunctionApp" class="anchored"><td class="def constructor"><a href="#type-expr.FunctionApp" class="anchor"></a><code>| </code><code><span class="constructor">FunctionApp</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <a href="../../ast/Ast/Ast_types/Function_name/index.html#type-t">Ast.Ast_types.Function_name.t</a> * <span><a href="index.html#type-expr">expr</a> list</span></code></td></tr><tr id="type-expr.Printf" class="anchored"><td class="def constructor"><a href="#type-expr.Printf" class="anchor"></a><code>| </code><code><span class="constructor">Printf</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * string * <span><a href="index.html#type-expr">expr</a> list</span></code></td><td class="doc"><p>no need for type_expr annotation as obviously TEVoid</p></td></tr><tr id="type-expr.FinishAsync" class="anchored"><td class="def constructor"><a href="#type-expr.FinishAsync" class="anchor"></a><code>| </code><code><span class="constructor">FinishAsync</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <span><a href="index.html#type-async_expr">async_expr</a> list</span> * <span><a href="index.html#type-expr">expr</a> list</span></code></td><td class="doc"><p>overall type is that of the expr on the current thread - since forked exprs' values are ignored</p></td></tr><tr id="type-expr.If" class="anchored"><td class="def constructor"><a href="#type-expr.If" class="anchor"></a><code>| </code><code><span class="constructor">If</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <a href="index.html#type-expr">expr</a> * <span><a href="index.html#type-expr">expr</a> list</span> * <span><a href="index.html#type-expr">expr</a> list</span></code></td><td class="doc"><p>If ___ then ___ else ___ - type is that of the branch exprs</p></td></tr><tr id="type-expr.While" class="anchored"><td class="def constructor"><a href="#type-expr.While" class="anchor"></a><code>| </code><code><span class="constructor">While</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * <a href="index.html#type-expr">expr</a> * <span><a href="index.html#type-expr">expr</a> list</span></code></td><td class="doc"><p>While ___ do ___ ; - no need for type_expr annotation as type of a loop is TEVoid</p></td></tr><tr id="type-expr.BinOp" class="anchored"><td class="def constructor"><a href="#type-expr.BinOp" class="anchor"></a><code>| </code><code><span class="constructor">BinOp</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <a href="../../ast/Ast/Ast_types/index.html#type-bin_op">Ast.Ast_types.bin_op</a> * <a href="index.html#type-expr">expr</a> * <a href="index.html#type-expr">expr</a></code></td></tr><tr id="type-expr.UnOp" class="anchored"><td class="def constructor"><a href="#type-expr.UnOp" class="anchor"></a><code>| </code><code><span class="constructor">UnOp</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-loc">Ast.Ast_types.loc</a> * <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <a href="../../ast/Ast/Ast_types/index.html#type-un_op">Ast.Ast_types.un_op</a> * <a href="index.html#type-expr">expr</a></code></td></tr></table></dt><dt class="spec type" id="type-constructor_arg"><a href="#type-constructor_arg" class="anchor"></a><code><span class="keyword">and</span> constructor_arg</code><code> = </code><table class="variant"><tr id="type-constructor_arg.ConstructorArg" class="anchored"><td class="def constructor"><a href="#type-constructor_arg.ConstructorArg" class="anchor"></a><code>| </code><code><span class="constructor">ConstructorArg</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <a href="../../ast/Ast/Ast_types/Field_name/index.html#type-t">Ast.Ast_types.Field_name.t</a> * <a href="index.html#type-expr">expr</a></code></td></tr></table></dt><dd><p>Constructor arg consists of a field and the expression being assigned to it (annotated with the type of the expression)</p></dd></dl><dl><dt class="spec type" id="type-async_expr"><a href="#type-async_expr" class="anchor"></a><code><span class="keyword">and</span> async_expr</code><code> = </code><table class="variant"><tr id="type-async_expr.AsyncExpr" class="anchored"><td class="def constructor"><a href="#type-async_expr.AsyncExpr" class="anchor"></a><code>| </code><code><span class="constructor">AsyncExpr</span> <span class="keyword">of</span> <span><a href="../../ast/Ast/Ast_types/Var_name/index.html#type-t">Ast.Ast_types.Var_name.t</a> list</span> * <span><a href="index.html#type-expr">expr</a> list</span></code></td></tr></table></dt><dd><p>Async exprs have a precomputed list of their free variables (passed as arguments when they are spawned as thread)</p></dd></dl><dl><dt class="spec type" id="type-function_defn"><a href="#type-function_defn" class="anchor"></a><code><span class="keyword">type</span> function_defn</code><code> = </code><table class="variant"><tr id="type-function_defn.TFunction" class="anchored"><td class="def constructor"><a href="#type-function_defn.TFunction" class="anchor"></a><code>| </code><code><span class="constructor">TFunction</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/Function_name/index.html#type-t">Ast.Ast_types.Function_name.t</a> * <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <span><a href="../../ast/Ast/Ast_types/index.html#type-param">Ast.Ast_types.param</a> list</span> * <span><a href="index.html#type-expr">expr</a> list</span></code></td></tr></table></dt><dd><p>Function defn consists of the function name, return type, the list of params, and the body expr block of the function</p></dd></dl><dl><dt class="spec type" id="type-method_defn"><a href="#type-method_defn" class="anchor"></a><code><span class="keyword">type</span> method_defn</code><code> = </code><table class="variant"><tr id="type-method_defn.TMethod" class="anchored"><td class="def constructor"><a href="#type-method_defn.TMethod" class="anchor"></a><code>| </code><code><span class="constructor">TMethod</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/Method_name/index.html#type-t">Ast.Ast_types.Method_name.t</a> * <a href="../../ast/Ast/Ast_types/index.html#type-type_expr">Ast.Ast_types.type_expr</a> * <span><a href="../../ast/Ast/Ast_types/index.html#type-param">Ast.Ast_types.param</a> list</span> * <span><a href="../../ast/Ast/Ast_types/Region_name/index.html#type-t">Ast.Ast_types.Region_name.t</a> list</span> * <span><a href="index.html#type-expr">expr</a> list</span></code></td></tr></table></dt><dd><p>Method defn consists the method name, return type, the list of params, the region affected and the body expr block of the function</p></dd></dl><dl><dt class="spec type" id="type-class_defn"><a href="#type-class_defn" class="anchor"></a><code><span class="keyword">type</span> class_defn</code><code> = </code><table class="variant"><tr id="type-class_defn.TClass" class="anchored"><td class="def constructor"><a href="#type-class_defn.TClass" class="anchor"></a><code>| </code><code><span class="constructor">TClass</span> <span class="keyword">of</span> <a href="../../ast/Ast/Ast_types/Class_name/index.html#type-t">Ast.Ast_types.Class_name.t</a> * <span><a href="../../ast/Ast/Ast_types/index.html#type-region">Ast.Ast_types.region</a> list</span> * <span><a href="../../ast/Ast/Ast_types/index.html#type-field_defn">Ast.Ast_types.field_defn</a> list</span> * <span><a href="index.html#type-method_defn">method_defn</a> list</span></code></td></tr></table></dt><dd><p>Class definitions consist of the class name, its capability regions and the fields and methods in the class</p></dd></dl><dl><dt class="spec type" id="type-program"><a href="#type-program" class="anchor"></a><code><span class="keyword">type</span> program</code><code> = </code><table class="variant"><tr id="type-program.Prog" class="anchored"><td class="def constructor"><a href="#type-program.Prog" class="anchor"></a><code>| </code><code><span class="constructor">Prog</span> <span class="keyword">of</span> <span><a href="index.html#type-class_defn">class_defn</a> list</span> * <span><a href="index.html#type-function_defn">function_defn</a> list</span> * <span><a href="index.html#type-expr">expr</a> list</span></code></td></tr></table></dt><dd><p>Each bolt program defines the classes,followed by functions, followed by the main expression block to execute.</p></dd></dl></div></body></html>